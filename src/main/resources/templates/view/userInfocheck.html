<!DOCTYPE html>

<html>

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>userInfocheck</title>
	
	<link rel="stylesheet" th:href="@{/css/background.css}" href="../../static/css/background.css">
	<link rel="stylesheet" th:href="@{/css/table_color.css}"  href="../../static/css/table_color.css">
	<link th:href="@{/css/LoginPage.css }" rel="stylesheet" href="../../static/css/LoginPage.css">
	<script type="text/javascript" th:src="@{/js/jquery.min.js}" src="../../static/js/jquery.min.js"></script>
	<script type="text/javascript" th:src="@{/js/userInfoCheck.js}" src="../../static/js/userInfoCheck.js"></script>

	<script>
		$(function(){
			// 获取URL参数
    	var params = new URLSearchParams(window.location.search);
    		// 通过参数名称获取值并设置到文本框
    		$('#id1').val(params.get('id'));
    		$('#userName1').val(params.get('userName'));
    		$('#furigana1').val(params.get('furigana'));
    		$('#phoneNo1').val(params.get('phoneNo'));
    		$('#password1').val(params.get('password'));
    		$('#emailAddress1').val(params.get('emailAddress'));
    		$('#postcode1').val(params.get('postcode'));
    		$('#address1').val(params.get('address'));
			//
		$('#submitBtn').click(function() {
    // 获取变更后的值
    var updatedId = $('#id1').val();
    var updatedUserName = $('#userName1').val();
    var updatedFurigana = $('#furigana1').val();
    var updatedPhoneNo = $('#phoneNo1').val();
    var updatedPassword = $('#password1').val();
    var updatedEmailAddress = $('#emailAddress1').val();
    var updatedPostcode = $('#postcode1').val();
    var updatedAddress = $('#address1').val();
    
    // 构造变更信息对象
    var updateData = {
	  "id":updatedId,
      "userName": updatedUserName,
      "furigana": updatedFurigana,
      "phoneNo": updatedPhoneNo,
      "password": updatedPassword,
      "emailAddress": updatedEmailAddress,
      "postcode": updatedPostcode,
      "address": updatedAddress
    };   
    // 发送 AJAX 请求，将变更信息传递给服务器
    $.ajax({
      url: '/brightstar/LRcatHotel/userInfoUpdate',
      type: 'post',
      data: {
		  "updateData":updateData
	  },
      success: function(response) {
        // 处理成功响应
        //alert('成功！');
        // 进行其他操作或页面跳转
        //window.location.href = "/brightstar/LRcatHotel/submitPage";
      },
      fail: function() {
        // 处理失败响应
       alert('失敗！');
        
      }
    });
  });
			//
		});
	</script>
	<style>
		@font-face {
			font-family: "newFont";
			src: url('../../static/font/Stick-Regular.ttf')
		}
		.form-style{
			border-radius: 5%;
			margin-left: -10vw;
			width: 400px;
		}
		
	</style>
	
</head>

<body class="form-body" >
	<div class="logo"></div>
	<div class="Login-block" style="font-family: 'newFont';">
		<img th:src="@{/img/logo.png}" src="../../static/img/logo.png">
		<h2 class="page-title"> 個人情報変更入力</h2>
	</div>
	<form  id="newForm" style="font-family: 'newFont';" 
	action="userInfoUpdate" method="post">

		<!-- reservation_info -->
		<center>
			<div class="con">
				<div class="con_title">
				</div>
				<br>
				<br>
				<table style="font-size: 30px;font-family: newFont;">
					<tbody>
						
						<tr>
							<td  width="400px" style="margin-left: 5vw;margin-right: -10vw;"><label for="userName" >会員番号：</label></td>
								<td>
									<input type="text" name="id" class="form-style"
									 id="id1" readonly>※自動更新なので変更できない
								 	<br>								 						 
								</td>							
						</tr>
						
						<tr>
							<td  width="400px" style="margin-left: 5vw;margin-right: -10vw;"><label for="userName" >お名前：</label></td>
								<td>
									<input type="text" name="userName" class="form-style"
									 id="userName1" >※変更する場合のみ入力
								 	<br>								 
								 	<span id="userNameError"></span> <!-- 错误消息元素 -->							 
								</td>							
						</tr>	
					
						
						<tr>
							<td width="400px" style="margin-left: 5vw;margin-right: -10vw;" ><label for="furigana">フリガナ：</label></td>
								<td>
									<input type="text" name="furigana" class="form-style"
									id="furigana1" >※変更する場合のみ入力
									<br>	
									<span id="furiganaError" class="error-message"></span> <!-- 错误消息元素 -->
								</td>
						</tr>	
											
						<tr>
							<td width="400px" style="margin-left: 5vw;margin-right: -10vw;"><label for="phoneNo">携帯番号：</label></td>
								<td>
									<input type="text" name="phoneNo" class="form-style"
								 	id="phoneNo1" >※変更する場合のみ入力
								 	<br>
								 	<span id="phoneNumberError" class="error-message"></span> <!-- 错误消息元素 -->
							</td>
					    </tr>
						
						<tr>
							<td width="400px" style="margin-left: 5vw;margin-right: -10vw;"><label for="password" >パスワード：</label></td>
								<td>
									<input type="password" name="password" class="form-style" 
								 	id="password1"  >※変更する場合のみ入力
								 	<br>
								 	<span id="passwordError" class="error-message"></span> <!-- 错误消息元素 -->				
							</td>					
					    </tr>
						
						<tr>
							<td width="400px" style="margin-left: 5vw;margin-right: -10vw;"><label for="mailaddress">メールアドレス：</label></td>
								<td>
									<input type="text" name="emailAddress" class="form-style"
								 	id="emailAddress1"  >※変更する場合のみ入力
								 	<br>
								 	<span id="emailAddressError" class="error-message"></span> <!-- 错误消息元素 -->
							</td>
						</tr>
						
						<tr>
							<td width="400px" style="margin-left: 5vw;margin-right: -10vw;"><label for="postalcode">郵便番号：</label></td>
								<td>
									<input type="text" name="postcode" class="form-style"
								 	id="postcode1" >※変更する場合のみ入力
								 	<br>
									<span id="postcodeError" class="error-message"></span> <!-- 错误消息元素 -->
							</td>
						</tr>
						
						<tr>
							<td width="400px" style="margin-left: 5vw;margin-right: -10vw;"><label for="address">ご住所：</label></td>
								<td>
									<input type="text" name="address" class="form-style"
								 	id="address1" >※変更する場合のみ入力
								 	<br>
								 	<span id="addressError" class="error-message"></span> <!-- 错误消息元素 -->
							</td>
						</tr>
						
					
						
					</tbody>
				</table>
				<button type="submit" class="btn btn-default" style="margin-top: 1vw;font-size: 2vw;font-family: 'newFont';" id="submitBtn">提出</button>
	</form>

</body>

</html>